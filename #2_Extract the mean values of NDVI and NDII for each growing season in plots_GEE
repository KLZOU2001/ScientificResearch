var pts : Table (your csv file path)

//Function to cloud mask from the pixel_qa band
function maskL8(image) {
  var qa = image.select('QA_PIXEL');  
  var cloudShadowBitMask = 1 << 3;
  var cloudsBitMask = 1 << 5;

  // Clear cloud and shadow pixels
  var mask = qa.bitwiseAnd(cloudShadowBitMask).eq(0)
      .and(qa.bitwiseAnd(cloudsBitMask).eq(0));

  return image.updateMask(mask).divide(10000);
}

//NDVI & NDII Calculation
var addIndex = function(img) {
  // NDVI
  var ndvi = img.normalizedDifference(['SR_B5', 'SR_B4']).rename('NDVI');

  // NDII (NIR - SWIR1)
  var ndii = img.normalizedDifference(['SR_B5', 'SR_B6']).rename('NDII');

  return img.addBands([ndvi, ndii]);
};

//Calculate the average NDVI/NDII value for each point during the growing season
var results = pts.map(function(p) {

  var year = 2017;
  var sos = ee.Number(p.get('SOS17'));
  var eos = ee.Number(p.get('EOS17'));

  var start = ee.Date.fromYMD(year,1,1).advance(sos, 'day');
  var end   = ee.Date.fromYMD(year,1,1).advance(eos, 'day');

  // Image Collection
  var col = ee.ImageCollection("LANDSAT/LC08/C02/T1_L2")
      .filterBounds(p.geometry())
      .filterDate(start, end)
      .map(maskL8)
      .map(addIndex)
      // Perform a 3x3 spatial average on each image
      .map(function(img){ return img.focal_mean(1, 'square', 'pixels'); });

  // Average growth season
  var ndvi_mean = col.select('NDVI').mean();
  var ndii_mean = col.select('NDII').mean();

  var dict = ndvi_mean.addBands(ndii_mean).reduceRegion({
    reducer: ee.Reducer.mean(),
    geometry: p.geometry(),
    scale: 30,
    maxPixels: 1e13
  });

  return p.set(dict);
});

 // Export results
Export.table.toDrive({
  collection: results,
  description: 'L8_NDVI_NDII_GrowingSeason_2017_3x3Mean',
  fileFormat: 'CSV'
});
